<!-- templates/index.html -->
{% extends "base.html" %}

{% block title %}Matterly ‚Äî From idea to matter{% endblock %}
{% block meta_description %}–í—ã –ø—Ä–∏—à–ª–∏ —Å –∏–¥–µ–µ–π ‚Äî —É–π–¥—ë—Ç–µ —Å –≥–æ—Ç–æ–≤—ã–º –∏–∑–¥–µ–ª–∏–µ–º. –ü—Ä–µ–º–∏—É–º 3D-–ø–µ—á–∞—Ç—å –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏. –ì–æ—Ç–æ–≤–æ –∑–∞
24 —á–∞—Å–∞.{% endblock %}
{% block og_title %}Matterly ‚Äî From idea to matter{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative h-screen w-full flex items-center justify-center overflow-hidden">
    <!-- Overlay –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∑–≤–µ–∑–¥ -->
    <div class="absolute inset-0 bg-dark-900 z-[-1]"></div>

    <div id="hero-3d" class="absolute inset-0 z-0">
        <!--<div id="hero-shape" class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 md:w-80 md:h-80"></div>-->
        <video lazy autoplay muted loop playsinline class="hero-video" aria-hidden="true">
            <source src="{{ url_for('static', filename='media/background.mp4') }}" type="video/mp4">
        </video>
    </div>
    <div class="relative z-10 text-center px-4 max-w-4xl">
        <h1 id="hero-title" class="text-4xl md:text-6xl font-bold mb-6 text-text-primary opacity-0">From idea to matter
            ‚Äî literally.</h1>
        <p id="hero-subtitle" class="text-xl mb-8 text-text-secondary opacity-0">–ü—Ä–µ–º–∏—É–º 3D-–ø–µ—á–∞—Ç—å –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏.
            –ì–æ—Ç–æ–≤—ã –∑–∞ 24 —á–∞—Å–∞.</p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
            <a href="{{ url_for('catalog') }}"
                class="px-8 py-4 bg-accent text-dark-900 font-bold rounded-full shadow-lg hover:bg-opacity-90 transition transform hover:scale-105 animate-pulse-neon">
                –ó–∞–∫–∞–∑–∞—Ç—å –∏–∑–¥–µ–ª–∏–µ
            </a>
            <a href="#how-it-works"
                class="px-8 py-4 glass text-text-primary font-medium backdrop-blur-sm border border-white/10 hover:border-accent transition">
                –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?
            </a>
        </div>
    </div>
</section>

<!-- –£–¢–ü -->
<section id="usp" class="py-20 px-4">
    <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
        {% for item in [
        {"icon": "‚ö°", "title": "–°–∫–æ—Ä–æ—Å—Ç—å", "desc": "–ì–æ—Ç–æ–≤–æ –∑–∞ 24‚Äì72 —á–∞—Å–∞"},
        {"icon": "üíé", "title": "–ö–∞—á–µ—Å—Ç–≤–æ", "desc": "–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –¥–∞–∂–µ –≤ –º–µ–ª–æ—á–∞—Ö"},
        {"icon": "üí∞", "title": "–¶–µ–Ω–∞", "desc": "–ù–∞ 20‚Äì30% –¥–µ—à–µ–≤–ª–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –ø—Ä–∏ —Ç–æ–º –∂–µ –∫–∞—á–µ—Å—Ç–≤–µ"}
        ] %}
        <div class="glass p-6 text-center tilt" data-tilt data-tilt-max="8" data-tilt-speed="400">
            <div class="text-4xl mb-4">{{ item.icon }}</div>
            <h3 class="text-xl font-bold mb-2 text-text-primary">{{ item.title }}</h3>
            <p class="text-text-secondary">{{ item.desc }}</p>
        </div>
        {% endfor %}
    </div>
</section>

<!-- –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç -->
<section id="how-it-works" class="py-20 px-4">
    <h2 class="text-3xl font-bold text-center mb-16 text-text-primary">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h2>
    <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">
        {% for step in [
        {"title": "–í—ã–±–µ—Ä–∏—Ç–µ", "desc": "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä –∏–ª–∏ —É—Å–ª—É–≥—É"},
        {"title": "–ó–∞–∫–∞–∂–∏—Ç–µ", "desc": "–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∏ –æ—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑"},
        {"title": "–ü–æ–ª—É—á–∏—Ç–µ", "desc": "–ß–µ—Ä–µ–∑ 48 —á–∞—Å–æ–≤ –≤–∞—à –∞–∫–∞–∑ –±—É–¥–µ—Ç —É –≤–∞—Å"}
        ] %}
        <div class="glass p-6 text-center">
            <div
                class="w-12 h-12 mx-auto mb-4 rounded-full bg-accent/10 flex items-center justify-center text-accent text-xl font-bold">
                {{ loop.index }}
            </div>
            <h3 class="font-bold mb-2 text-text-primary">{{ step.title }}</h3>
            <p class="text-text-secondary text-sm">{{ step.desc }}</p>
        </div>
        {% endfor %}
    </div>
</section>

<!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ -->
<section class="py-20 px-4">
    <h2 class="text-3xl font-bold text-center mb-16 text-text-primary">–ö–∞—Ç–∞–ª–æ–≥ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h2>
    <div class="max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for category in categories %}
        <a href="{{ url_for('catalog', category=category) }}"
            class="group relative block overflow-hidden rounded-2xl glass tilt p-6 text-center hover:bg-accent/5 transition">
            <div class="text-4xl mb-4">üìÅ</div>
            <h3 class="text-xl font-bold text-text-primary group-hover:text-accent transition">
                {{ category|capitalize }}
            </h3>
            <p class="text-text-secondary mt-2 text-sm">
                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–±–æ—Ç—ã
            </p>
            <!-- –°—Ç—Ä–µ–ª–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ -->
            <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-accent" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M14 5l7 7m0 0l-7 7m7-7H3" />
                </svg>
            </div>
        </a>
        {% else %}
        <p class="col-span-full text-center text-gray-500">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.</p>
        {% endfor %}
    </div>
</section>

<!-- –ì–∞–ª–µ—Ä–µ—è -->
<section class="py-20 px-4">
    <h2 class="text-3xl font-bold text-center mb-16 text-text-primary">–ù–∞—à–∏ —Ä–∞–±–æ—Ç—ã</h2>
    <div class="max-w-6xl mx-auto grid grid-cols-2 md:grid-cols-3 gap-6">
        {% for i in range(6) %}
        <div class="group relative overflow-hidden rounded-2xl glass tilt" data-tilt>
            <img src="{{ url_for('static', filename='media/work' + ((i + 1)|string) + '.jpg') }}" alt="–†–∞–±–æ—Ç–∞ {{ i+1 }}"
                class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-110">
            <div
                class="absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                <p class="text-white text-center px-2">–ó–∞–º–µ–Ω–∞ –¥–µ—Ç–∞–ª–∏ –¥–ª—è —Å—Ç–∞–Ω–∫–∞, PLA, 2 –¥–Ω—è</p>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Hero –∞–Ω–∏–º–∞—Ü–∏–∏
    gsap.fromTo("#hero-title", { opacity: 0, y: 30 }, { opacity: 1, y: 0, duration: 1.2, ease: "power3.out" });
    gsap.fromTo("#hero-subtitle", { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 1.2, delay: 0.3, ease: "power3.out" });

    // Scroll-triggered –∞–Ω–∏–º–∞—Ü–∏–∏
    gsap.utils.toArray('.glass').forEach(el => {
        gsap.from(el, {
            scrollTrigger: {
                trigger: el,
                start: "top bottom-=100",
                toggleActions: "play none none reverse"
            },
            y: 50,
            opacity: 0,
            duration: 0.8,
            ease: "power3.out"
        });
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Tilt –¥–ª—è 3D-—Ñ–æ—Ä–º—ã –∏ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    VanillaTilt.init(document.querySelectorAll(".tilt"), {
        glare: true,
        "max-glare": 0.3,
        scale: 1.05
    });

    // –ü–∞—Ä–∞–ª–ª–∞–∫—Å –¥–ª—è —Ñ–æ–Ω–∞ (hero-3d)
    const hero3d = document.getElementById('hero-3d');
    const shape = document.getElementById('hero-shape');

    window.addEventListener('scroll', () => {
        const scrollY = window.scrollY;
        const offset = scrollY * 0.3; // –º–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ
        hero3d.style.transform = `translateY(${offset}px)`;
    });

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–ª–ª–∞–∫—Å –∏ –¥–ª—è —Å–∞–º–æ–π —Ñ–æ—Ä–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    // –ù–æ –ª—É—á—à–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å—Å—è —Ñ–æ–Ω–æ–º, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å

    document.addEventListener("DOMContentLoaded", function () {
        var lazyVideos = [].slice.call(document.querySelectorAll("video.lazy"));

        if ("IntersectionObserver" in window) {
            var lazyVideoObserver = new IntersectionObserver(function (entries, observer) {
                entries.forEach(function (video) {
                    if (video.isIntersecting) {
                        for (var source in video.target.children) {
                            var videoSource = video.target.children[source];
                            if (typeof videoSource.tagName === "string" && videoSource.tagName === "SOURCE") {
                                videoSource.src = videoSource.dataset.src;
                            }
                        }

                        video.target.load();
                        video.target.classList.remove("lazy");
                        lazyVideoObserver.unobserve(video.target);
                    }
                });
            });

            lazyVideos.forEach(function (lazyVideo) {
                lazyVideoObserver.observe(lazyVideo);
            });
        }
    });
</script>
{% endblock %}