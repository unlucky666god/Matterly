<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="ru-RU">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="{% block meta_description %}Matterly ‚Äî –ø—Ä–µ–º–∏—É–º 3D-–ø–µ—á–∞—Ç—å –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏. –ì–æ—Ç–æ–≤—ã –∑–∞ 24 —á–∞—Å–∞. –¢–æ—á–Ω–æ. –ë—ã—Å—Ç—Ä–æ. –ë–µ–∑ –≥–æ–ª–æ–≤–Ω–æ–π –±–æ–ª–∏.{% endblock %}">
    <meta name="keywords"
        content="3D –ø–µ—á–∞—Ç—å, Matterly, –∑–∞–∫–∞–∑ 3D –º–æ–¥–µ–ª–∏, –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ, PLA, ABS, PETG, 3D –ø–µ—á–∞—Ç—å –∑–∞ 24 —á–∞—Å–∞">
    <meta property="og:title" content="{% block og_title %}Matterly ‚Äî From idea to matter{% endblock %}">
    <meta property="og:description"
        content="{% block og_description %}–í—ã –ø—Ä–∏—à–ª–∏ —Å –∏–¥–µ–µ–π ‚Äî —É–π–¥—ë—Ç–µ —Å –≥–æ—Ç–æ–≤—ã–º –∏–∑–¥–µ–ª–∏–µ–º.{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:image" content="{{ url_for('static', filename='media/og-image.jpg', _external=True) }}">
    <meta name="robots" content="index, follow">

    <title>{% block title %}Matterly ‚Äî From idea to matter{% endblock %}</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.0/dist/vanilla-tilt.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: {
                            900: '#0B0F19',
                            800: '#121826',
                        },
                        accent: '#00F5D4',
                        text: {
                            primary: '#E2E8F0',
                            secondary: '#A0AEC0',
                        }
                    },
                    animation: {
                        'pulse-neon': 'pulse-neon 2s infinite',
                    },
                    keyframes: {
                        'pulse-neon': {
                            '0%, 100%': { boxShadow: '0 0 0 0 rgba(0, 245, 212, 0.4)' },
                            '50%': { boxShadow: '0 0 0 12px rgba(0, 245, 212, 0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0B0F19 0%, #121826 100%);
            color: #E2E8F0;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* –ó–≤—ë–∑–¥–Ω–∞—è –ø—ã–ª—å (—Ñ–æ–Ω) */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(2px 2px at 20px 30px, #00F5D430, transparent),
                radial-gradient(1px 1px at 80px 70px, #00F5D420, transparent),
                radial-gradient(1.5px 1.5px at 150px 120px, #00F5D410, transparent),
                radial-gradient(1px 1px at 300px 200px, #00F5D415, transparent),
                radial-gradient(2px 2px at 500px 400px, #00F5D425, transparent);
            background-size: 600px 600px;
            z-index: -2;
            animation: parallax-stars 60s linear infinite;
        }

        @keyframes parallax-stars {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 600px 600px;
            }
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border-radius: 16px;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .glass:hover {
            transform: translateY(-6px) scale(1.01);
            box-shadow: 0 8px 30px rgba(0, 245, 212, 0.1);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 245, 212, 0.3);
            border-radius: 3px;
        }

        /* –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
        #hero-3d {
            background: radial-gradient(ellipse at center, #0b0b1a 0%, #000000 100%);
            overflow: hidden;
        }

        /* –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è 3D-—Ñ–æ—Ä–º–∞ */
        #hero-shape {
            /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã */
            width: 40rem;
            height: 40rem;

            /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
            @apply w-[300px] h-[300px] md:w-[400px] md:h-[400px] lg:w-[500px] lg:h-[500px];

            background:
                radial-gradient(circle, rgba(99, 102, 241, 0.4) 0%, transparent 70%),
                conic-gradient(from 0deg, #8b5cf6, #ec4899, #3b82f6, #8b5cf6);
            border-radius: 45% 55% 70% 30% / 30% 60% 40% 70%;
            filter: blur(30px);
            /* —á—É—Ç—å –±–æ–ª—å—à–µ blur –¥–ª—è –º—è–≥–∫–æ—Å—Ç–∏ */
            opacity: 0.85;
            animation: pulseGlow 5s infinite ease-in-out alternate;
            will-change: transform;
            transform-style: preserve-3d;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            /* —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª–∞ –∫–ª–∏–∫–∞–º */
        }

        @keyframes pulseGlow {
            0% {
                filter: blur(15px) brightness(1);
                opacity: 0.6;
            }

            100% {
                filter: blur(25px) brightness(1.2);
                opacity: 0.9;
            }
        }

        /* –ü–∞—Ä–∞–ª–ª–∞–∫—Å: —Ñ–æ–Ω —Å–º–µ—â–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ */
        .parallax-bg {
            transform: translateZ(0);
        }

        /* –í–∏–¥–µ–æ –Ω–∞ —Ñ–æ–Ω–µ –≥–µ—Ä–æ–π-—Å–µ–∫—Ü–∏–∏ */
        .hero-video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
            object-fit: cover;
            z-index: -1;
            opacity: 0.65;
            /* —Å–Ω–∏–∂–∞–µ–º —è—Ä–∫–æ—Å—Ç—å, —á—Ç–æ–±—ã –Ω–µ –æ—Ç–≤–ª–µ–∫–∞–ª–æ */
            filter: blur(1px) brightness(0.8) contrast(1.1);
        }

        /* –¢—ë–º–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ */
        .hero-video::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.8) 100%);
            z-index: 0;
        }

        /* –ù–æ ::after –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ <video>, –ø–æ—ç—Ç–æ–º—É –¥–æ–±–∞–≤–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π */
        .hero-overlay {
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.7) 100%);
            z-index: 0;
            pointer-events: none;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –±—É—Ä–≥–µ—Ä–∞ ‚Üí –∫—Ä–µ—Å—Ç–∏–∫–∞ */
        .burger-active span:nth-child(1) {
            transform: translateY(6px) rotate(45deg);
        }

        .burger-active span:nth-child(2) {
            opacity: 0;
        }

        .burger-active span:nth-child(3) {
            transform: translateY(-6px) rotate(-45deg);
        }
    </style>
</head>

<body>


    <!-- Header -->
    <header class="glass fixed top-4 left-4 right-4 z-50 mx-auto max-w-7xl px-4 py-3 backdrop-blur-sm">
        <div class="flex justify-between items-center">
            <a href="/" class="text-xl font-bold text-accent">Matterly</a>

            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ -->
            <nav class="hidden md:flex space-x-6">
                {% for page in [('catalog', '–ö–∞—Ç–∞–ª–æ–≥'), ('services', '–£—Å–ª—É–≥–∏'), ('materials', '–ú–∞—Ç–µ—Ä–∏–∞–ª—ã'),
                ('portfolio', '–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ'), ('delivery', '–î–æ—Å—Ç–∞–≤–∫–∞'), ('articles', '–°—Ç–∞—Ç—å–∏'), ('contacts', '–ö–æ–Ω—Ç–∞–∫—Ç—ã')]
                %}
                <a href="/{{ page[0] }}" class="font-medium text-text-secondary hover:text-accent transition">{{ page[1]
                    }}</a>
                {% endfor %}
            </nav>

            <!-- –ü–æ–∏—Å–∫ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ -->
            <form class="relative hidden md:block" method="GET" action="/search">
                <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫..."
                    class="px-4 py-2 text-sm rounded-full bg-white/10 backdrop-blur-sm border border-white/20 focus:outline-none focus:ring-1 focus:ring-accent text-text-primary placeholder:text-text-secondary">
                <button type="submit" class="absolute right-3 top-2.5 text-text-secondary">üîç</button>
            </form>

            <!-- –ë—É—Ä–≥–µ—Ä-–∫–Ω–æ–ø–∫–∞ –¢–û–õ–¨–ö–û –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö -->
            <button id="mobile-menu-button"
                class="md:hidden flex flex-col justify-center items-center p-3 rounded-lg hover:bg-gray-800 transition z-50">
                <span class="w-6 h-0.5 bg-text-primary mb-1 transition-transform origin-center"></span>
                <span class="w-6 h-0.5 bg-text-primary mb-1 transition-all"></span>
                <span class="w-6 h-0.5 bg-text-primary transition-transform origin-center"></span>
            </button>
        </div>
    </header>

    <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é (–í–ù–ï header!) -->
    <div id="mobile-menu-overlay"
        class="fixed inset-0 bg-black bg-opacity-60 z-40 opacity-0 pointer-events-none transition-opacity duration-300 md:hidden">
    </div>

    <div id="mobile-menu"
        class="fixed top-0 right-0 h-full w-4/5 max-w-xs bg-dark-900 bg-opacity-90 backdrop-blur-xl border-l border-gray-700 z-50 transform translate-x-full transition-transform duration-300 ease-in-out p-6 flex flex-col md:hidden">
        <div class="flex justify-between items-center mb-10 mt-6">
            <span class="text-xl font-bold text-text-primary">–ú–µ–Ω—é</span>
            <button id="close-menu"
                class="text-text-primary hover:text-accent text-3xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-800 transition">
                &times;
            </button>
        </div>

        <nav class="flex flex-col space-y-6 flex-1">
            <a href="/" class="text-lg font-medium text-text-primary hover:text-accent transition py-2">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="/catalog"
                class="text-lg font-medium text-text-primary hover:text-accent transition py-2">–ö–∞—Ç–∞–ª–æ–≥</a>
            <a href="/services"
                class="text-lg font-medium text-text-primary hover:text-accent transition py-2">–£—Å–ª—É–≥–∏</a>
            <a href="/portfolio"
                class="text-lg font-medium text-text-primary hover:text-accent transition py-2">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</a>
            <a href="/articles"
                class="text-lg font-medium text-text-primary hover:text-accent transition py-2">–°—Ç–∞—Ç—å–∏</a>
            <a href="/contacts"
                class="text-lg font-medium text-text-primary hover:text-accent transition py-2">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </nav>

        <div class="mt-auto pt-6 border-t border-gray-700">
            <p class="text-sm text-gray-400">¬© 2025 Matterly</p>
        </div>
    </div>

    <main class="pt-24 pb-16">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="glass mx-4 md:mx-auto max-w-7xl px-6 py-8 backdrop-blur-sm mt-12">
        <div class="text-center">
            <div id="logo-animated" class="text-2xl font-bold mb-4 text-accent">Matterly</div>
            <p class="text-text-secondary mb-4">¬© 2025 Matterly. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            <p class="text-text-secondary mb-4">Created by Gamma</p>
            <div class="flex justify-center space-x-6 text-text-secondary">
                <a href="#" class="hover:text-accent transition">–í–ö–æ–Ω—Ç–∞–∫—Ç–µ</a>
                <a href="#" class="hover:text-accent transition">Telegram</a>
                <a href="#" class="hover:text-accent transition">YouTube</a>
                <a href="mailto:hello@matterly.ru" class="hover:text-accent transition">hello@matterly.ru</a>
            </div>
        </div>
    </footer>

    <!-- GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <!-- Tilt.js -->
    <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.0/dist/vanilla-tilt.min.js"></script>

    <!-- Three.js (–¥–ª—è hero-–º–æ–¥–µ–ª–∏) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- –ê–Ω–∏–º–∞—Ü–∏–∏ -->
    <script>
        // –ê–Ω–∏–º–∞—Ü–∏—è –ª–æ–≥–æ—Ç–∏–ø–∞ (—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ —á–∞—Å—Ç–∏—Ü)
        document.addEventListener('DOMContentLoaded', () => {
            const logo = document.getElementById('logo-animated');
            if (logo) {
                const text = logo.textContent;
                logo.innerHTML = '';
                text.split('').forEach((char, i) => {
                    const span = document.createElement('span');
                    span.textContent = char === ' ' ? '\u00A0' : char;
                    span.style.display = 'inline-block';
                    span.style.opacity = '0';
                    span.style.transform = 'translateY(20px)';
                    logo.appendChild(span);
                    gsap.to(span, {
                        opacity: 1,
                        y: 0,
                        delay: i * 0.05,
                        duration: 0.5,
                        ease: "power3.out"
                    });
                });
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const menuButton = document.getElementById('mobile-menu-button');
            const closeMenu = document.getElementById('close-menu');
            const mobileMenu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay');

            if (!menuButton || !mobileMenu || !overlay) return;

            const openMenu = () => {
                mobileMenu.classList.remove('translate-x-full');
                mobileMenu.classList.add('translate-x-0');
                overlay.classList.remove('pointer-events-none', 'opacity-0');
                overlay.classList.add('opacity-100');
                document.body.classList.add('overflow-hidden');
                menuButton.classList.add('burger-active'); // ‚úÖ –∞–∫—Ç–∏–≤–Ω—ã–π –±—É—Ä–≥–µ—Ä
            };

            const closeMenuHandler = () => {
                mobileMenu.classList.remove('translate-x-0');
                mobileMenu.classList.add('translate-x-full');
                overlay.classList.remove('opacity-100');
                overlay.classList.add('pointer-events-none', 'opacity-0');
                document.body.classList.remove('overflow-hidden');
                menuButton.classList.remove('burger-active'); // ‚úÖ —Å–±—Ä–æ—Å
            };

            menuButton.addEventListener('click', openMenu);
            closeMenu.addEventListener('click', closeMenuHandler);
            overlay.addEventListener('click', closeMenuHandler);

            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', closeMenuHandler);
            });
        });
    </script>

    {% block extra_js %}{% endblock %}
</body>

</html>